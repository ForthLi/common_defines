# chmod命令

chmod是一个Linux命令，用于改变文件模式和权限。

## 改变一个或多个文件的存取模式（mode）

Linux/Unix的文件调用权限分为三级：

- 文件拥有者
- 群组
- 其他

利用chmod可以藉以控制文件如何被调用。使用权限：所有使用者

- Chmod [options] mode files

#### 补充

```
# 查看linux文件的权限
ls -l 文件名称
	例：
		ls -ld shell_test
		# -rw-r--r--  1 lijinhu_2  staff  32  7  7 15:09 test.sh
# 查看文件夹的权限
ls -ld 文件夹名称(所在目录)
	例：
		ls -ld shell_test
		# drwxr-xr-x  3 lijinhu_2  staff  96  7  7 15:09 shell_test
		
		打印解释：
		第一列 ： “drwxr-xr-x-”  表识文件的类型 和文件权限（开头d表示文件夹, 如果是文件，则为-）,分段为 rwx r-x r-x 表示三者的权限为读写执行、读执行、读执行（文件拥有者、群组、其他人）  
  
    第二列： “3”是纯数字 ，表示 文件链接个数  （一个空目录的该字段是2，表示该目录下有两个子目录，因为每一个目录都有一个指向它本身的子目录"." 和指向它上级目录的子目录".."）

    第三列 ： “lijinhu_2” 表示文件的所有者   

    第四列：“staff” 表示为文件的所在群组   

    第五列：“96”，表示为文件长度（大小）  

    第六列：“7  7 15:09”，表示文件最后更新（修改）时间  

    第七列：“shell_test” 表示文件的名称  


```

只能文件属主或特权用户才能使用该功能来改变文件存取模式。mode可以是数字形式或以who opcode permission形式表示。who是可选的，默认是a(所有用户)。只能选择一个opcode(操作码)。可指定多个mode，以逗号分开。

## 语法

```sh
chmod [-cfvR] [--help] [--version] mode file...
```

### 参数说明

mode : 权限设定字符串，格式如下：

```
[ugoa...][[+-=][rwxX]...][,...]
```

其中：

- ​	u 表示该文件的拥有者，g 表示与该文件的拥有者属于同一个群体(group)者，o 表示其他以外的人，a 表示这三者皆是。u用户 g组 o其它 a 所有用户(默认)
- \+ 表示增加权限、- 表示取消权限、= 表示唯一设定权限。
- r 表示可读取，w 表示可写入，x 表示可执行，X 表示只有当该文件是个子目录或者该文件已经被设定过为可执行。

其他参数说明：

- -c : 若该文件权限确实已经更改，才显示其更改动作（-c，--changes只输出被改变文件的信息）
- -f : 若该文件权限无法被更改也不要显示错误讯息（--silent，--quiet，当chmod不能改变文件模式时，不通知文件的用户）
- -v : 显示权限变更的详细资料
- -R : 对目前目录下的所有文件与子目录进行相同的权限变更(即以递回的方式逐个变更)--recursive可递归遍历子目录，把修改应到目录下所有文件和子目录
- --help : 显示辅助说明、输出帮助信息。
- --version : 显示版本
- --reference=filename参照filename的权限来设置权限
-  -v，--verbose无论修改是否成功，输出每个文件的信息

作为选择，我们多数用三位八进制数字的形式来表示权限，第一位指定属主的权限，第二位指定组权限，第三位指定其他用户的权限，每位通过4(读)、2(写)、1(执行)三种数值的和来确定权限。如6(4+2)代表有读写权，7(4+2+1)有读、写和执行的权限。

 还可设置第四位，它位于三位权限序列的前面，第四位数字取值是4，2，1，代表意思如下：

- 4，执行时设置用户ID，用于授权给基于文件属主的进程，而不是给创建此进程的用户。
- 2，执行时设置用户组ID，用于授权给基于文件所在组的进程，而不是基于创建此进程的用户。
- 1，设置粘着位。

##### 实例：

$ chmod u+x file         　　  给file的属主增加执行权限

$ chmod 751 file         　　  给file的属主分配读、写、执行(7)的权限，给file的所在组分配读、执行(5)的权限，给其他用户分配执行(1)的权限

$ chmod u=rwx,g=rx,o=x file    上例的另一种形式

$ chmod =r file         　　　　为所有用户分配读权限（注：在mac下T erminal中，不能生效）

$ chmod 444 file        　　　 同上例

$ chmod a-wx,a+r  file  　　   同上例

$ chmod -R u+r directory    　  递归地给directory目录下所有文件和子目录的属主分配读的权限

$ chmod 4755              　设置用ID，给属主分配读、写和执行权限，给组和其他用户分配读、执行的权限。